services:
  log-lupus-helper:
    container_name: log-lupus-helper
    image: log-lupus-helper
    restart: on-failure:1
    build:
      context: .
      dockerfile: Dockerfile
      target: base
    volumes:
    - ./json.sqlite:/app/json.sqlite
    - ../shared-auth/loglupus_data.json:/shared-auth/loglupus_data.json
    - ./logs:/app/logs
    labels:
      - "com.centurylinklabs.watchtower.enable=false"
    networks:
      - protonmail-bridge
      - caddy

networks:
  protonmail-bridge:
    name: protonmail-bridge
    external: true
  caddy:
    name: caddy
    external: true